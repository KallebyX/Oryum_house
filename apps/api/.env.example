# =================================================================
# ORYUM HOUSE - BACKEND CONFIGURATION
# =================================================================
# Copy this file to .env and fill in your values
# =================================================================

# =================================================================
# APPLICATION
# =================================================================
NODE_ENV=development
API_PORT=3001

# =================================================================
# DATABASE
# =================================================================
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
DATABASE_URL="postgresql://oryumhouse:senha123@localhost:5432/oryumhouse?schema=public"

# =================================================================
# JWT AUTHENTICATION
# =================================================================
# Generate secure secrets with: openssl rand -base64 32
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"
JWT_REFRESH_SECRET="your-super-secret-refresh-key-change-this-in-production"

# Token expiration times
JWT_EXPIRES_IN="15m"
JWT_REFRESH_EXPIRES_IN="7d"

# =================================================================
# NEXTAUTH (Frontend Auth)
# =================================================================
# URL where your Next.js app is running
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-super-secret-nextauth-key-change-this-in-production"

# =================================================================
# CORS
# =================================================================
# Comma-separated list of allowed origins
# Development: http://localhost:3000
# Production: https://your-domain.com,https://www.your-domain.com
CORS_ORIGINS="http://localhost:3000"

# =================================================================
# REDIS (Optional but recommended for production)
# =================================================================
# Used for caching and session storage
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
# Redis TTL in seconds (default: 1 hour)
REDIS_TTL=3600

# =================================================================
# FILE STORAGE (S3/MinIO)
# =================================================================
# MinIO (local development): http://localhost:9000
# AWS S3 (production): https://s3.amazonaws.com
S3_ENDPOINT="http://localhost:9000"
S3_REGION="us-east-1"
S3_BUCKET="oryumhouse"
S3_ACCESS_KEY="minioadmin"
S3_SECRET_KEY="minioadmin"
S3_USE_SSL=false
S3_PORT=9000

# File upload limits
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES="image/jpeg,image/png,image/gif,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"

# =================================================================
# EMAIL (SMTP)
# =================================================================
# SMTP server configuration
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-app-password"
SMTP_FROM="Oryum House <noreply@oryumhouse.com>"

# Email templates
EMAIL_TEMPLATES_PATH="./templates/emails"

# =================================================================
# WEB PUSH NOTIFICATIONS (Optional)
# =================================================================
# Generate VAPID keys with: npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY="your-vapid-public-key"
VAPID_PRIVATE_KEY="your-vapid-private-key"
VAPID_SUBJECT="mailto:admin@oryumhouse.com"

# =================================================================
# ANTIVIRUS (ClamAV - Optional)
# =================================================================
# Used for scanning uploaded files
CLAMAV_HOST=localhost
CLAMAV_PORT=3310
CLAMAV_ENABLED=false

# =================================================================
# RATE LIMITING (Throttler)
# =================================================================
# Requests per time window
THROTTLE_TTL=60
THROTTLE_LIMIT=100

# =================================================================
# OAUTH PROVIDERS (Optional)
# =================================================================
# Google OAuth
GOOGLE_CLIENT_ID="your-google-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="your-google-client-secret"

# Facebook OAuth (if needed)
FACEBOOK_CLIENT_ID=""
FACEBOOK_CLIENT_SECRET=""

# =================================================================
# WEBHOOKS (Optional)
# =================================================================
# External webhook URLs for notifications
WEBHOOK_URL=""
WEBHOOK_SECRET=""

# =================================================================
# LOGGING
# =================================================================
# Log level: debug, info, warn, error
LOG_LEVEL=info
# Enable pretty print for logs in development
LOG_PRETTY_PRINT=true

# =================================================================
# MONITORING (Optional)
# =================================================================
# Sentry DSN for error tracking
SENTRY_DSN=""

# Prometheus metrics
PROMETHEUS_PORT=9090

# =================================================================
# TIMEZONE
# =================================================================
TZ="America/Sao_Paulo"

# =================================================================
# SECURITY
# =================================================================
# Bcrypt rounds for password hashing (10-12 recommended)
BCRYPT_ROUNDS=10

# Session cookie settings
COOKIE_SECURE=false
COOKIE_HTTP_ONLY=true
COOKIE_SAME_SITE=lax

# =================================================================
# FEATURES FLAGS (Optional)
# =================================================================
# Enable/disable features
FEATURE_GAMIFICATION=true
FEATURE_ASSEMBLIES=true
FEATURE_DOCUMENTS=true
FEATURE_MAINTENANCE=true
FEATURE_REPORTS=true

# =================================================================
# TESTING
# =================================================================
# Test database (use different database for testing)
TEST_DATABASE_URL="postgresql://oryumhouse:senha123@localhost:5432/oryumhouse_test?schema=public"

# =================================================================
# NOTES
# =================================================================
# 1. NEVER commit the .env file to version control
# 2. Use strong, random secrets for production
# 3. Keep development and production secrets separate
# 4. Rotate secrets regularly
# 5. Use environment-specific .env files:
#    - .env.development
#    - .env.staging
#    - .env.production
# =================================================================
